<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700" role="img" aria-label="Q-Forge architecture">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#f6f4ff"/>
      <stop offset="100%" stop-color="#f1f8ff"/>
    </linearGradient>
    <linearGradient id="panelA" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ffe4d6"/>
      <stop offset="100%" stop-color="#ffd1b3"/>
    </linearGradient>
    <linearGradient id="panelB" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#dff3ff"/>
      <stop offset="100%" stop-color="#b9e5ff"/>
    </linearGradient>
    <linearGradient id="panelC" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#e8ffe6"/>
      <stop offset="100%" stop-color="#c7f5c3"/>
    </linearGradient>
    <linearGradient id="panelD" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#fff6cc"/>
      <stop offset="100%" stop-color="#ffe699"/>
    </linearGradient>
    <style>
      .bg { fill: url(#bg); }
      .box { stroke: #1f2937; stroke-width: 2; rx: 18; ry: 18; }
      .title { font: 700 24px "Segoe UI", Arial, sans-serif; fill: #111827; }
      .label { font: 600 18px "Segoe UI", Arial, sans-serif; fill: #111827; }
      .small { font: 14px "Segoe UI", Arial, sans-serif; fill: #1f2937; }
      .arrow { stroke: #1f2937; stroke-width: 2.4; marker-end: url(#arrowhead); }
      .dashed { stroke-dasharray: 6 6; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <polygon points="0 0, 10 4, 0 8" fill="#1f2937" />
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1200" height="700" />
  <text x="40" y="48" class="title">Q-Forge: Query Planning, Safety & Performance Control Plane</text>

  <!-- Top row -->
  <rect x="60" y="110" width="260" height="140" class="box" fill="url(#panelA)" />
  <text x="85" y="150" class="label">MCP Client</text>
  <text x="85" y="175" class="small">CLI / Agent / App</text>
  <text x="85" y="198" class="small">Natural language</text>

  <rect x="360" y="110" width="300" height="140" class="box" fill="url(#panelB)" />
  <text x="385" y="150" class="label">MCP Tools</text>
  <text x="385" y="175" class="small">nl_to_sql, plan_query</text>
  <text x="385" y="198" class="small">run_sql, ask_db</text>

  <rect x="700" y="110" width="420" height="140" class="box" fill="url(#panelC)" />
  <text x="725" y="150" class="label">Application Orchestration</text>
  <text x="725" y="175" class="small">Lifecycle, modes, policies</text>
  <text x="725" y="198" class="small">Audit + metrics</text>

  <!-- Middle row -->
  <rect x="120" y="320" width="360" height="150" class="box" fill="url(#panelD)" />
  <text x="145" y="360" class="label">Core Engine</text>
  <text x="145" y="385" class="small">Planner + Validator</text>
  <text x="145" y="408" class="small">Explainability JSON</text>

  <rect x="540" y="320" width="540" height="150" class="box" fill="url(#panelB)" />
  <text x="565" y="360" class="label">Infrastructure Adapters</text>
  <text x="565" y="385" class="small">SQLAlchemy / LLM Provider</text>
  <text x="565" y="408" class="small">DbContext + Caching</text>

  <!-- Bottom row -->
  <rect x="120" y="520" width="300" height="120" class="box" fill="url(#panelC)" />
  <text x="145" y="560" class="label">Database</text>
  <text x="145" y="585" class="small">Postgres, MySQL, SQLite</text>

  <rect x="460" y="520" width="300" height="120" class="box" fill="url(#panelA)" />
  <text x="485" y="560" class="label">LLM Provider</text>
  <text x="485" y="585" class="small">Pluggable translator</text>

  <rect x="800" y="520" width="280" height="120" class="box" fill="url(#panelD)" />
  <text x="825" y="560" class="label">Audit + Metrics</text>
  <text x="825" y="585" class="small">JSONL + timings</text>

  <!-- Arrows -->
  <line x1="320" y1="180" x2="360" y2="180" class="arrow" />
  <line x1="660" y1="180" x2="700" y2="180" class="arrow" />
  <line x1="810" y1="250" x2="350" y2="320" class="arrow dashed" />
  <line x1="900" y1="250" x2="810" y2="320" class="arrow dashed" />
  <line x1="480" y1="395" x2="540" y2="395" class="arrow" />
  <line x1="320" y1="470" x2="270" y2="520" class="arrow" />
  <line x1="700" y1="470" x2="610" y2="520" class="arrow" />
  <line x1="930" y1="470" x2="940" y2="520" class="arrow" />
</svg>
